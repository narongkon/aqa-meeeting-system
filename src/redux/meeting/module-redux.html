<script>
    Nylon.addReducer('meeting_module', function (state, action) {
        state = state || {
            select: {}
        }

        switch (action.type) {
            case 'MEETING_MODULE_GET_MEETING':
                state.meeting = action.payload
                return state
            case 'MEETING_MODULE_GET_PROVINCE':
                state.province = action.payload
                return state
            default:
                return state
        }
        return state
    })


    Nylon.addAction({
        view2Con: function (arg1) {
            return { type: arg1 }
        },
        meetingModuleGetProject: function (id) {
            return dispatch => {
                axios.get(`/meeting/module/getMeeting/${id}`).then(
                    res => {
                        dispatch({ type: 'MEETING_MODULE_GET_MEETING', payload: res.data })
                    }
                )
            }
        },
        meetingModuleGetProvince: function (id) {
            return dispatch => {
                axios.get(`/meeting/module/getProvince`).then(
                    res => {
                        dispatch({ type: 'MEETING_MODULE_GET_PROVINCE', payload: res.data })
                    }
                )
            }
        },
        meetingModuleAddData: function (data) {
            var progress = Nylon.$['page-meeting-module'].$.manage_module.$.setting_module.$.pc2.progress()
            axios.post('/meeting/module', data).then(
                res => {
                    Nylon.dispatch('meetingMeetingGetData')
                    progress(_ => {
                        
                        // Nylon.$['page-meeting-meeting'].$.list_meeting.dropdown = {group: 'all', level: 'all'}
                        // Nylon.$['page-meeting-meeting'].$.manage_meeting.$.pr.close()
                        // Nylon.store.dispatch({ type: 'MEETING_MEETING_CLEAR_SELECT' })

                        // Nylon.toast({
                        //     msg: 'เพิ่มเสร็จสิ้น'
                        // })
                    })


                }
            )
        },

    })

</script>