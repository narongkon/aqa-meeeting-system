<script>
    Nylon.addReducer('expenses_module', function (state, action) {
        state = state || {}

        switch (action.type) {
            case 'EXPENSES_MODULE_GET_MEETING':
                state.meeting = action.payload
                return state
                break;
            case 'EXPENSES_MODULE_GET_DATA':
                state.data = action.payload
                return state
                break;
        }
        return state
    })


    Nylon.addAction({
        expensesModuleGetMeeting: function (id) {
            return dispatch => {
                axios.get(`/meeting?id=${id}`).then(
                    res => {
                        dispatch({ type: 'EXPENSES_MODULE_GET_MEETING', payload: res.data })
                    }
                )
            }
        },
        expensesModuleGetData: function (id) {

            var progress = Nylon.$['page-expenses-module'].$.list_module.$.pc1.progress({ position: 'top' })
            return dispatch => {
                axios.get(`/module?meeting_id=${id}`).then(
                    res => {
                        progress(() => {
                            dispatch({ type: 'EXPENSES_MODULE_GET_DATA', payload: res.data })
                        })
                    }
                )
            }
        }
    })

</script>