<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/polymer/lib/elements/dom-repeat.html">

<link rel="import" href="../../components/nylon-panel-card/nylon-panel-card.html">
<link rel="import" href="../../../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input.html">

<link rel="import" href="../../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../../bower_components/vaadin-upload/vaadin-upload.html">
<link rel="import" href="../../../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="./nylon-datepicker.html">

<link rel="import" href="../../redux-mixin.html">
<link rel="import" href="../../i18n/page-meeting-module-i18n.html">

<link rel="import" href="../../layout/shared-styles.html">

<dom-module id="page-meeting-setting-subproject">
    <template>
        <style include="shared-styles">
             :host {
                display: block
            }
        </style>

        <nylon-panel-card id="pc2">
            <div slot="content">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <paper-input label="[[i18n.subproject_name]]" value="{{data.module_name}}"></paper-input>
                    </div>
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <paper-dropdown-menu label="[[i18n.province]]" style="width: 100%;">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="{{data.province_id}}">
                                <dom-repeat items="{{province}}">
                                    <template>
                                        <paper-item value="[[item.id]]">[[item.province_th]]</paper-item>
                                    </template>
                                </dom-repeat>
                            </paper-listbox>
                        </paper-dropdown-menu>
                    </div>
                </div>
                <div class="row" style="margin-top: 1.5cm;">
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <paper-input label="[[i18n.place]]" value="{{data.module_place}}"></paper-input>
                    </div>
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <paper-input label="ที่อยู่" value="{{data.module_address}}"></paper-input>
                    </div>
                </div>

                <div class="row" style="margin-top: 0.5cm;">
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <label>จำนวนวัน</label>
                        <paper-radio-group selected="{{radio}}" on-click="_radio_change">
                            <paper-radio-button name="a">วันเดียว</paper-radio-button>
                            <paper-radio-button name="b">มากกว่า 1 วัน</paper-radio-button>
                        </paper-radio-group>

                    </div>
                </div>
                <div class="row" style="margin-top: 0.5cm;">
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <nylon-datepicker label="เริ่มต้น" value="[[data.date_start_module]]" value-return="{{data.date_start_module}}"></nylon-datepicker>
                    </div>
                    <div class="col-xs-12 col-sm-12 col-md-6" id="date_end">

                        <nylon-datepicker label="สิ้นสุด" value="[[data.date_end_module]]" value-return="{{data.date_end_module}}"></nylon-datepicker>
                    </div>
                </div>
                <div class="row" style="margin-top: 1.5cm;">
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <paper-input label="จำนวนชั่วโมง" value="{{data.module_hours}}"></paper-input>
                    </div>
                </div>
                <div class="row" style="margin-top: 1.5cm;">
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <vaadin-upload id="upload"></vaadin-upload>
                    </div>
                </div>
            </div>


            <app-toolbar slot="footer">
                <div main-title></div>
                <paper-button raised on-click="_closePanelRight">
                    <iron-icon icon="clear"></iron-icon>&nbsp;&nbsp;[[i18n.cancel]]
                </paper-button>
                <paper-button raised class="btn-success" on-click="_saveData">
                    <iron-icon icon="check"></iron-icon>&nbsp;&nbsp;[[i18n.save]]
                </paper-button>
            </app-toolbar>
        </nylon-panel-card>



    </template>

    <script>
        class pageMeetingSettingSubproject extends ReduxMixin(Polymer.Element) {

            static get is() {
                return 'page-meeting-setting-subproject';
            }

            static get properties() {
                return {
                    i18n: {
                        type: Object,
                        statePath: 'i18n.pageMeetingModule',
                        observer: '_i18n'
                    },
                    province: {
                        type: Object,
                        statePath: 'meeting_module.province'
                    },
                    data: {
                        type: Object,
                        value: {
                            date_end_module: "",
                            date_start_module: "",
                            province_id: "",
                            invite: [],
                            meeting: {},
                            module_name: "",
                            module_place: "",
                            module_address: "",
                            module_hours: ""
                        }
                    },
                    radio: {
                        type: String,
                        value: 'a'
                    }
                };
            }

            ready() {
                super.ready();
                this.$.date_end.style.visibility = "hidden";
                Polymer.RenderStatus.afterNextRender(this, function () {

                });
            }

            _i18n(e) {

                let upload = this.$.upload

                upload.i18n = {
                    dropFiles: {
                        one: e.drop_file_here,
                        many: e.drop_file_here
                    },
                    addFiles: {
                        one: e.select_file,
                        many: e.upload_files
                    },
                    cancel: e.cancel,
                    error: {
                        tooManyFiles: 'Too Many Files.',
                        fileIsTooBig: 'File is Too Big.',
                        incorrectFileType: 'Incorrect File Type.'
                    },
                    uploading: {
                        status: {
                            connecting: 'Connecting...',
                            stalled: 'Stalled.',
                            processing: 'Processing File...',
                            held: 'Queued'
                        },
                        remainingTime: {
                            prefix: 'remaining time: ',
                            unknown: 'unknown remaining time'
                        },
                        error: {
                            serverUnavailable: 'Server Unavailable',
                            unexpectedServerError: 'Unexpected Server Error',
                            forbidden: 'Forbidden'
                        }
                    },
                    units: {
                        size: ['B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']
                    }
                };
            }

            _closePanelRight() {
                Nylon.$['page-meeting-module'].$.manage_module.$.pr.close()
            }

            _radio_change() {
                if (this.radio == 'a') {
                    this.$.date_end.style.visibility = "hidden";
                } else {
                    this.$.date_end.style.visibility = "visible";
                }
            }

            _saveData() {
                console.log(this._params.id)
                // if (!this.data.id || this.data.id == "") {
                //     Nylon.dispatch('meetingModuleAddData', this.data)
                // } else {
                //     Nylon.dispatch('meetingModuleEditData', this.data)
                // }
            }

        }

        window.customElements.define(pageMeetingSettingSubproject.is, pageMeetingSettingSubproject);
    </script>
</dom-module>